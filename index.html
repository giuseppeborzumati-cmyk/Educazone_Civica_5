
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Il Giardiniere della Mente - De Bono AI Tool</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.5s ease-out forwards;
        }
        .hat-card {
            transition: all 0.3s ease;
        }
        .hat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .hat-card.active {
            transform: scale(1.05);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-slate-50 font-sans p-4 md:p-8 min-h-screen">

    <div class="max-w-4xl mx-auto">
        
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-slate-800 mb-2">Il Giardiniere della Mente</h1>
            <p class="text-slate-600 text-lg">
                Generatore di Prompt Laterali basato su Edward de Bono
            </p>
        </header>

        <!-- Input Section -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8 border border-slate-200">
            <label class="block text-slate-700 font-semibold mb-2 text-lg">
                Qual è l'argomento o il problema?
            </label>
            <input
                type="text"
                id="problemInput"
                placeholder="Es: Il traffico in città, Progettare una nuova tazza, Il futuro della scuola..."
                class="w-full p-4 text-lg border-2 border-slate-200 rounded-lg focus:border-indigo-500 focus:outline-none transition-colors"
            />
        </div>

        <!-- Hats Grid -->
        <div id="hatsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
            <!-- Hat buttons will be injected here by JS -->
        </div>

        <!-- Result Section -->
        <div id="resultSection" class="hidden bg-white rounded-xl shadow-xl border-2 border-indigo-100 overflow-hidden animate-fade-in-up">
            <div id="resultHeader" class="p-4 border-b flex justify-between items-center">
                <h2 id="resultTitle" class="font-bold text-xl flex items-center gap-2">
                    <!-- Icon and Title injected by JS -->
                </h2>
            </div>
            
            <div class="p-8">
                <p class="text-slate-500 mb-4 text-sm uppercase tracking-wide font-semibold">
                    Copia questo prompt e incollalo nella tua IA preferita:
                </p>
                
                <div class="bg-slate-100 p-6 rounded-lg font-mono text-slate-700 leading-relaxed mb-6 relative min-h-[100px]">
                    <p id="promptText" class="whitespace-pre-wrap"></p>
                    <p id="emptyPromptMsg" class="text-slate-400 italic hidden">Inserisci un problema sopra per vedere il prompt...</p>
                </div>

                <div class="flex justify-end gap-3">
                    <button id="resetBtn" class="px-4 py-2 text-slate-500 hover:text-slate-700 transition-colors">
                        Reset
                    </button>
                    <button id="copyBtn" class="flex items-center gap-2 px-6 py-3 rounded-lg font-bold text-white transition-all bg-slate-300 cursor-not-allowed" disabled>
                        <i data-lucide="copy" class="w-5 h-5"></i>
                        <span id="copyBtnText">Copia Prompt</span>
                    </button>
                </div>
            </div>

            <div class="bg-indigo-50 p-4 text-indigo-800 text-sm border-t border-indigo-100">
                <strong>Obiettivo Pedagogico:</strong> Questo prompt costringe l'IA a uscire dai suoi pattern statistici standard ("pensiero verticale") per adottare una specifica modalità cognitiva ("pensiero laterale").
            </div>
        </div>

    </div>

    <!-- Application Logic -->
    <script>
        // Data Configuration
        const hats = [
            {
                id: 'white',
                name: 'Cappello Bianco',
                desc: 'Fatti e Informazioni',
                colorClasses: 'bg-gray-100 text-gray-800 border-gray-300',
                headerColor: 'bg-gray-100',
                headerText: 'text-gray-800',
                icon: 'search',
                promptTemplate: (topic) => `Agisci come un analista dati oggettivo. Riguardo al tema "${topic}", elenca solo i fatti verificati, le statistiche disponibili e le lacune informative. Non includere opinioni o interpretazioni. Sii neutro.`
            },
            {
                id: 'red',
                name: 'Cappello Rosso',
                desc: 'Emozioni e Intuito',
                colorClasses: 'bg-red-100 text-red-800 border-red-300',
                headerColor: 'bg-red-100',
                headerText: 'text-red-800',
                icon: 'brain',
                promptTemplate: (topic) => `Abbandona la logica. Riguardo a "${topic}", voglio sapere come si *sentono* le persone coinvolte. Descrivi le reazioni viscerali, le paure, le speranze e le intuizioni irrazionali che questo argomento suscita. Usa un linguaggio emotivo.`
            },
            {
                id: 'black',
                name: 'Cappello Nero',
                desc: 'Cautela e Rischi',
                colorClasses: 'bg-gray-800 text-white border-black',
                headerColor: 'bg-gray-800',
                headerText: 'text-white',
                icon: 'shield-alert',
                promptTemplate: (topic) => `Indossa il cappello del critico severo. Analizza "${topic}" e identifica ogni possibile punto debole, rischio, pericolo o difetto logico. Perché questo potrebbe fallire? Sii spietato nella tua analisi dei rischi.`
            },
            {
                id: 'yellow',
                name: 'Cappello Giallo',
                desc: 'Ottimismo e Benefici',
                colorClasses: 'bg-yellow-100 text-yellow-800 border-yellow-300',
                headerColor: 'bg-yellow-100',
                headerText: 'text-yellow-800',
                icon: 'sun',
                promptTemplate: (topic) => `Sii un ottimista visionario. Guarda "${topic}" e trova valore anche dove sembra non essercene. Quali sono i benefici a lungo termine? Quali sono le opportunità nascoste? Costruisci uno scenario positivo e costruttivo.`
            },
            {
                id: 'green',
                name: 'Cappello Verde',
                desc: 'Creatività e Provocazione',
                colorClasses: 'bg-green-100 text-green-800 border-green-300',
                headerColor: 'bg-green-100',
                headerText: 'text-green-800',
                icon: 'zap',
                promptTemplate: (topic) => `Usa il pensiero laterale. Applica una "Provocazione" (PO) al concetto di "${topic}". Proponi 3 idee assurde, illogiche o impossibili correlate a questo, e poi usale come trampolino di lancio per trovare una soluzione innovativa mai vista prima.`
            },
            {
                id: 'blue',
                name: 'Cappello Blu',
                desc: 'Controllo e Processo',
                colorClasses: 'bg-blue-100 text-blue-800 border-blue-300',
                headerColor: 'bg-blue-100',
                headerText: 'text-blue-800',
                icon: 'cloud-rain',
                promptTemplate: (topic) => `Agisci come un moderatore o un manager. Organizza il pensiero riguardo a "${topic}". Definisci quali sono i prossimi passi, sintetizza le opinioni contrastanti e crea un piano d'azione strutturato.`
            }
        ];

        // State
        let state = {
            problem: '',
            activeHatId: null
        };

        // DOM Elements
        const problemInput = document.getElementById('problemInput');
        const hatsGrid = document.getElementById('hatsGrid');
        const resultSection = document.getElementById('resultSection');
        const resultHeader = document.getElementById('resultHeader');
        const resultTitle = document.getElementById('resultTitle');
        const promptText = document.getElementById('promptText');
        const emptyPromptMsg = document.getElementById('emptyPromptMsg');
        const copyBtn = document.getElementById('copyBtn');
        const copyBtnText = document.getElementById('copyBtnText');
        const resetBtn = document.getElementById('resetBtn');

        // Functions
        function init() {
            renderHats();
            lucide.createIcons();
            
            // Event Listeners
            problemInput.addEventListener('input', (e) => {
                state.problem = e.target.value;
                updatePromptDisplay();
                updateCopyButtonState();
            });

            resetBtn.addEventListener('click', () => {
                state.problem = '';
                problemInput.value = '';
                updatePromptDisplay();
                updateCopyButtonState();
            });

            copyBtn.addEventListener('click', copyToClipboard);
        }

        function renderHats() {
            hatsGrid.innerHTML = hats.map(hat => `
                <button 
                    onclick="selectHat('${hat.id}')"
                    id="btn-${hat.id}"
                    class="hat-card p-6 rounded-xl border-2 flex flex-col items-center text-center group w-full ${hat.colorClasses}"
                >
                    <div class="mb-3 bg-white/50 p-3 rounded-full shadow-sm group-hover:scale-110 transition-transform">
                        <i data-lucide="${hat.icon}" class="w-6 h-6"></i>
                    </div>
                    <h3 class="font-bold text-xl mb-1">${hat.name}</h3>
                    <p class="opacity-90 text-sm">${hat.desc}</p>
                </button>
            `).join('');
        }

        function selectHat(id) {
            state.activeHatId = id;
            const hat = hats.find(h => h.id === id);

            // Update UI selection
            document.querySelectorAll('.hat-card').forEach(el => {
                el.classList.remove('ring-4', 'ring-offset-2', 'ring-indigo-400', 'active');
            });
            const activeBtn = document.getElementById(`btn-${id}`);
            if (activeBtn) activeBtn.classList.add('ring-4', 'ring-offset-2', 'ring-indigo-400', 'active');

            // Show Result Section
            resultSection.classList.remove('hidden');
            
            // Update Header Colors
            resultHeader.className = `p-4 border-b flex justify-between items-center ${hat.headerColor}`;
            resultTitle.className = `font-bold text-xl flex items-center gap-2 ${hat.headerText}`;
            
            // Update Header Content
            // We need to recreate the icon since Lucide transforms <i> to <svg>
            resultTitle.innerHTML = `<i data-lucide="${hat.icon}" class="w-6 h-6"></i> Prompt Generato: ${hat.name}`;
            lucide.createIcons();

            updatePromptDisplay();
            updateCopyButtonState();
        }

        function updatePromptDisplay() {
            const hat = hats.find(h => h.id === state.activeHatId);
            if (!hat) return;

            if (state.problem.trim() !== '') {
                promptText.textContent = hat.promptTemplate(state.problem);
                promptText.classList.remove('hidden');
                emptyPromptMsg.classList.add('hidden');
            } else {
                promptText.classList.add('hidden');
                emptyPromptMsg.classList.remove('hidden');
            }
        }

        function updateCopyButtonState() {
            const hasContent = state.problem.trim() !== '' && state.activeHatId;
            
            if (hasContent) {
                copyBtn.disabled = false;
                copyBtn.classList.remove('bg-slate-300', 'cursor-not-allowed');
                copyBtn.classList.add('bg-indigo-600', 'hover:bg-indigo-700', 'shadow-lg', 'hover:shadow-indigo-500/30');
            } else {
                copyBtn.disabled = true;
                copyBtn.classList.add('bg-slate-300', 'cursor-not-allowed');
                copyBtn.classList.remove('bg-indigo-600', 'hover:bg-indigo-700', 'shadow-lg', 'hover:shadow-indigo-500/30');
            }
        }

        function copyToClipboard() {
            const textToCopy = promptText.textContent;
            if (!textToCopy) return;

            // Fallback for older environments or if navigator.clipboard is blocked
            const textArea = document.createElement("textarea");
            textArea.value = textToCopy;
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopySuccess();
                }
            } catch (err) {
                console.error('Fallback: Oops, unable to copy', err);
            }
            
            document.body.removeChild(textArea);
        }

        function showCopySuccess() {
            const originalText = copyBtnText.textContent;
            const iconContainer = copyBtn.querySelector('svg') || copyBtn.querySelector('i'); // Lucide replaces i with svg
            
            // Temporarily change button state
            copyBtnText.textContent = 'Copiato!';
            // Note: Changing icon back and forth with Lucide in vanilla JS is tricky dynamically without re-running createIcons constantly.
            // We'll just stick to text change for feedback simplicity.
            
            setTimeout(() => {
                copyBtnText.textContent = 'Copia Prompt';
            }, 2000);
        }

        // Initialize App
        init();

        // Global scope exposure for inline onclick handlers
        window.selectHat = selectHat;
    </script>
</body>
</html>
