<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Il Prisma Cognitivo: De Bono x Gardner</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .selection-card {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Effetto selezione vibrante */
        .selection-card.selected {
            transform: scale(1.05);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.2);
            z-index: 10;
        }

        /* Animazione Result */
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-result {
            animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        /* Grid personalizzata per le intelligenze */
        .grid-intel {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 1rem;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-100 via-indigo-50 to-purple-50 min-h-screen text-slate-800 p-4 pb-20">

    <div class="max-w-6xl mx-auto">
        
        <!-- Header Innovativo -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-10 py-6 border-b border-slate-200/60">
            <div>
                <h1 class="text-4xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-purple-600 mb-2">
                    Il Prisma Cognitivo
                </h1>
                <p class="text-slate-500 font-medium">De Bono (Pensiero) × Gardner (Espressione) = AI Power</p>
            </div>
            <div class="mt-4 md:mt-0 flex gap-3">
                <button onclick="randomize()" class="flex items-center gap-2 px-5 py-2.5 bg-white border border-slate-200 rounded-full shadow-sm hover:shadow-md hover:border-indigo-300 transition-all text-sm font-semibold text-slate-600 hover:text-indigo-600">
                    <i data-lucide="shuffle" class="w-4 h-4"></i>
                    Roulette Didattica
                </button>
            </div>
        </header>

        <!-- Main Workspace Grid -->
        <div class="grid lg:grid-cols-12 gap-8">
            
            <!-- Left Column: Inputs & Controls (7 cols) -->
            <div class="lg:col-span-7 space-y-8">
                
                <!-- 1. Topic Input -->
                <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 relative overflow-hidden group">
                    <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                        <i data-lucide="lightbulb" class="w-24 h-24 text-indigo-500"></i>
                    </div>
                    <label class="block text-sm font-bold text-slate-400 uppercase tracking-wider mb-2">Step 1: L'Argomento</label>
                    <input type="text" id="topicInput" placeholder="Es: La Rivoluzione Francese, I Buchi Neri, Etica dell'AI..." 
                           class="w-full text-2xl font-semibold placeholder-slate-300 border-b-2 border-slate-100 focus:border-indigo-500 focus:outline-none py-2 bg-transparent transition-colors">
                </div>

                <!-- 2. De Bono Selector -->
                <div>
                    <div class="flex items-center justify-between mb-3">
                        <label class="text-sm font-bold text-slate-400 uppercase tracking-wider">Step 2: Il Filtro Mentale (De Bono)</label>
                        <span class="text-xs px-2 py-1 bg-slate-100 rounded text-slate-500">Come pensiamo?</span>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                        <!-- Hats injected by JS -->
                        <div id="hatsContainer" class="contents"></div>
                    </div>
                </div>

                <!-- 3. Gardner Selector -->
                <div>
                    <div class="flex items-center justify-between mb-3">
                        <label class="text-sm font-bold text-slate-400 uppercase tracking-wider">Step 3: Il Canale Espressivo (Gardner)</label>
                        <span class="text-xs px-2 py-1 bg-slate-100 rounded text-slate-500">Come creiamo?</span>
                    </div>
                    <div id="intelContainer" class="grid-intel">
                        <!-- Intelligences injected by JS -->
                    </div>
                </div>

            </div>

            <!-- Right Column: The Output (5 cols) -->
            <div class="lg:col-span-5 relative">
                <div class="sticky top-6">
                    
                    <!-- Action Button -->
                    <button id="generateBtn" onclick="generatePrompt()" disabled 
                            class="w-full py-5 rounded-2xl bg-slate-900 text-white font-bold text-lg shadow-xl shadow-indigo-200 hover:shadow-indigo-300 hover:-translate-y-1 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 transition-all mb-6 flex items-center justify-center gap-3">
                        <i data-lucide="wand-2" class="w-6 h-6"></i>
                        <span>Genera Esperienza</span>
                    </button>

                    <!-- Result Card -->
                    <div id="resultCard" class="hidden animate-result bg-white rounded-3xl shadow-2xl border border-slate-100 overflow-hidden">
                        
                        <!-- Header dinamico -->
                        <div id="resultHeader" class="p-6 bg-gradient-to-r from-indigo-500 to-purple-600 text-white relative overflow-hidden">
                            <div class="absolute -right-6 -top-6 w-32 h-32 bg-white opacity-10 rounded-full blur-2xl"></div>
                            <h3 class="text-xs font-bold opacity-75 uppercase tracking-widest mb-1">Output Generato</h3>
                            <div class="flex items-center gap-2 text-2xl font-bold" id="resultTitle">
                                <!-- Title JS -->
                            </div>
                        </div>

                        <!-- Content -->
                        <div class="p-6 space-y-6">
                            
                            <!-- Analysis Badge -->
                            <div class="flex flex-wrap gap-2">
                                <span id="badgeHat" class="px-3 py-1 rounded-full text-xs font-bold border"></span>
                                <span class="text-slate-300">•</span>
                                <span id="badgeIntel" class="px-3 py-1 rounded-full text-xs font-bold bg-slate-100 text-slate-600 border border-slate-200"></span>
                            </div>

                            <!-- The Prompt -->
                            <div class="relative group">
                                <div class="absolute -inset-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-xl opacity-0 group-hover:opacity-10 transition duration-500 blur"></div>
                                <div class="relative bg-slate-50 p-5 rounded-xl border border-slate-200 font-mono text-sm text-slate-700 leading-relaxed whitespace-pre-wrap" id="promptOutput">
                                    <!-- Prompt Content -->
                                </div>
                                <div class="absolute top-2 right-2">
                                    <button onclick="copyPrompt()" class="p-2 bg-white rounded-lg shadow-sm hover:text-indigo-600 transition-colors" title="Copia">
                                        <i data-lucide="copy" class="w-4 h-4"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Explanation -->
                            <div class="bg-yellow-50 p-4 rounded-xl border border-yellow-100 text-sm text-yellow-800 flex gap-3">
                                <i data-lucide="info" class="w-5 h-5 flex-shrink-0 text-yellow-600 mt-0.5"></i>
                                <p id="logicExplanation">
                                    Questa combinazione forza l'IA a pensare [Hat Logic] ed esprimersi tramite [Gardner Logic].
                                </p>
                            </div>

                        </div>
                    </div>

                    <!-- Placeholder State -->
                    <div id="placeholderState" class="text-center p-10 border-2 border-dashed border-slate-200 rounded-3xl text-slate-400">
                        <i data-lucide="layers" class="w-16 h-16 mx-auto mb-4 opacity-50"></i>
                        <p>Seleziona gli ingredienti a sinistra per sintetizzare una nuova esperienza di apprendimento.</p>
                    </div>

                </div>
            </div>

        </div>

    </div>

    <!-- Logic -->
    <script>
        /* --- 1. DATA MATRIX --- */
        const hats = [
            { id: 'white', name: 'Analista (Bianco)', desc: 'Fatti & Dati', color: 'bg-slate-100', text: 'text-slate-800', border: 'border-slate-300', promptRole: 'un analista dati neutrale' },
            { id: 'red', name: 'Emotivo (Rosso)', desc: 'Sentimenti', color: 'bg-red-50', text: 'text-red-700', border: 'border-red-200', promptRole: 'un empatico passionale' },
            { id: 'black', name: 'Critico (Nero)', desc: 'Rischi & Difetti', color: 'bg-gray-800', text: 'text-white', border: 'border-gray-900', promptRole: 'un risk manager severo' },
            { id: 'yellow', name: 'Ottimista (Giallo)', desc: 'Valore & Benefici', color: 'bg-yellow-50', text: 'text-yellow-700', border: 'border-yellow-200', promptRole: 'un visionario ottimista' },
            { id: 'green', name: 'Creativo (Verde)', desc: 'Idee & Provocazioni', color: 'bg-green-50', text: 'text-green-700', border: 'border-green-200', promptRole: 'un inventore laterale' },
            { id: 'blue', name: 'Regista (Blu)', desc: 'Processo & Controllo', color: 'bg-blue-50', text: 'text-blue-700', border: 'border-blue-200', promptRole: 'un manager organizzativo' }
        ];

        const intelligences = [
            { id: 'linguistic', name: 'Linguistica', icon: 'languages', action: 'scrivere/parlare', promptTask: 'creare un racconto, un poema o un discorso' },
            { id: 'logical', name: 'Logico-Matematica', icon: 'sigma', action: 'calcolare/classificare', promptTask: 'creare un algoritmo, un grafico o una struttura logica' },
            { id: 'spatial', name: 'Visuo-Spaziale', icon: 'image', action: 'visualizzare/disegnare', promptTask: 'descrivere un\'infografica, una mappa mentale o una scena visiva dettagliata' },
            { id: 'musical', name: 'Musicale', icon: 'music', action: 'comporre/ascoltare', promptTask: 'comporre il testo di una canzone, analizzare il ritmo o usare metafore sonore' },
            { id: 'kinesthetic', name: 'Corporeo-Cinestetica', icon: 'move', action: 'costruire/muoversi', promptTask: 'progettare un\'attività fisica, una simulazione pratica o una performance teatrale' },
            { id: 'interpersonal', name: 'Interpersonale', icon: 'users', action: 'interagire/guidare', promptTask: 'simulare un\'intervista, un dibattito o una dinamica di gruppo' },
            { id: 'intrapersonal', name: 'Intrapersonale', icon: 'user', action: 'riflettere/analizzare sé', promptTask: 'scrivere un diario riflessivo, un monologo interiore o una meditazione guidata' },
            { id: 'naturalist', name: 'Naturalistica', icon: 'leaf', action: 'osservare/collegare', promptTask: 'usare metafore biologiche, classificare tassonomie o collegare ai cicli naturali' }
        ];

        /* --- 2. STATE --- */
        let state = {
            topic: '',
            hat: null,
            intel: null
        };

        /* --- 3. INIT & RENDER --- */
        function init() {
            renderHats();
            renderIntel();
            setupListeners();
            lucide.createIcons();
        }

        function renderHats() {
            const container = document.getElementById('hatsContainer');
            container.innerHTML = hats.map(h => `
                <div onclick="selectHat('${h.id}')" id="hat-${h.id}" 
                     class="selection-card cursor-pointer p-4 rounded-xl border ${h.color} ${h.border} opacity-70 hover:opacity-100 relative overflow-hidden">
                    <div class="relative z-10">
                        <h4 class="font-bold ${h.text} text-sm">${h.name}</h4>
                        <p class="text-xs mt-1 font-medium opacity-80 ${h.id === 'black' ? 'text-gray-300' : 'text-slate-600'}">${h.desc}</p>
                    </div>
                </div>
            `).join('');
        }

        function renderIntel() {
            const container = document.getElementById('intelContainer');
            container.innerHTML = intelligences.map(i => `
                <div onclick="selectIntel('${i.id}')" id="intel-${i.id}"
                     class="selection-card cursor-pointer bg-white p-3 rounded-xl border border-slate-200 hover:border-indigo-300 flex flex-col items-center text-center gap-2 group">
                    <div class="p-2 bg-slate-50 rounded-full group-hover:bg-indigo-50 text-slate-500 group-hover:text-indigo-600 transition-colors">
                        <i data-lucide="${i.icon}" class="w-5 h-5"></i>
                    </div>
                    <span class="text-xs font-bold text-slate-700 leading-tight">${i.name}</span>
                </div>
            `).join('');
        }

        /* --- 4. INTERACTIONS --- */
        function selectHat(id) {
            state.hat = hats.find(h => h.id === id);
            
            // Visual Updates
            hats.forEach(h => {
                const el = document.getElementById(`hat-${h.id}`);
                el.classList.remove('opacity-100', 'ring-2', 'ring-offset-2', 'ring-slate-400', 'scale-105', 'shadow-lg');
                el.classList.add('opacity-70');
            });
            const selected = document.getElementById(`hat-${id}`);
            selected.classList.remove('opacity-70');
            selected.classList.add('opacity-100', 'ring-2', 'ring-offset-2', 'ring-slate-400', 'scale-105', 'shadow-lg');
            
            checkGenerate();
        }

        function selectIntel(id) {
            state.intel = intelligences.find(i => i.id === id);

            // Visual Updates
            intelligences.forEach(i => {
                const el = document.getElementById(`intel-${i.id}`);
                el.classList.remove('bg-indigo-50', 'border-indigo-500', 'ring-2', 'ring-indigo-200');
                el.classList.add('bg-white', 'border-slate-200');
            });
            const selected = document.getElementById(`intel-${id}`);
            selected.classList.remove('bg-white', 'border-slate-200');
            selected.classList.add('bg-indigo-50', 'border-indigo-500', 'ring-2', 'ring-indigo-200');

            checkGenerate();
        }

        function checkGenerate() {
            const btn = document.getElementById('generateBtn');
            const topic = document.getElementById('topicInput').value.trim();
            if(state.hat && state.intel && topic) {
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
            } else {
                btn.disabled = true;
            }
        }

        function setupListeners() {
            document.getElementById('topicInput').addEventListener('input', (e) => {
                state.topic = e.target.value;
                checkGenerate();
            });
        }

        /* --- 5. THE INNOVATION: MATRIX GENERATION --- */
        function generatePrompt() {
            if(!state.hat || !state.intel || !state.topic) return;

            // Hide placeholder, show result
            document.getElementById('placeholderState').classList.add('hidden');
            const card = document.getElementById('resultCard');
            card.classList.remove('hidden');
            
            // Reset animation
            card.classList.remove('animate-result');
            void card.offsetWidth; // trigger reflow
            card.classList.add('animate-result');

            // Constructing the "Sensible" Complex Prompt
            const hat = state.hat;
            const intel = state.intel;
            const topic = state.topic;

            // Titolo Dinamico
            document.getElementById('resultTitle').innerHTML = `
                <i data-lucide="${intel.icon}"></i> + <span class="bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-200">${hat.name.split(' ')[0]}</span>
            `;

            // Badge Styles
            const bHat = document.getElementById('badgeHat');
            bHat.className = `px-3 py-1 rounded-full text-xs font-bold border ${hat.color} ${hat.text} ${hat.border}`;
            bHat.innerText = `Thinking: ${hat.name}`;
            
            const bIntel = document.getElementById('badgeIntel');
            bIntel.innerText = `Intelligence: ${intel.name}`;

            // --- THE CORE ALGORITHM (Combinatorial Prompting) ---
            const basePrompt = `Agisci come un esperto di didattica innovativa e un assistente AI avanzato.
            
TEMA: "${topic}"
MODALITÀ DI PENSIERO: ${hat.name} (${hat.desc})
INTELLIGENZA TARGET: ${intel.name} (Output: ${intel.promptTask})

Il tuo compito è generare un'attività didattica o un output creativo unico che unisca queste due dimensioni.

1. ADOTTA LA PERSONA: Sii ${hat.promptRole}. Filtra tutto attraverso questa lente.
2. USA IL CANALE: Non spiegare semplicemente. Devi ${intel.promptTask} riguardo al tema.
3. OUTPUT:
   Crea un contenuto concreto.
   Se l'intelligenza è Musicale, scrivi il testo della canzone.
   Se è Logica, scrivi i passaggi dell'algoritmo.
   Se è Cinestetica, descrivi i movimenti scena per scena.

Obiettivo: Dimostrare come il pensiero ${hat.name.toLowerCase()} possa essere espresso attraverso l'intelligenza ${intel.name.toLowerCase()}.`;

            document.getElementById('promptOutput').innerText = basePrompt;

            // Explanation
            document.getElementById('logicExplanation').innerHTML = `
                Stai chiedendo all'IA di elaborare il tema <strong>${topic}</strong> usando la logica rigida del <strong>${hat.name}</strong> ma di esprimerlo forzatamente attraverso il canale <strong>${intel.name}</strong>. Questo contrasto genera apprendimento profondo.
            `;

            lucide.createIcons();
        }

        function copyPrompt() {
            const text = document.getElementById('promptOutput').innerText;
            navigator.clipboard.writeText(text);
            const btn = document.querySelector('button[title="Copia"]');
            btn.innerHTML = '<i data-lucide="check" class="w-4 h-4 text-green-600"></i>';
            setTimeout(() => {
                btn.innerHTML = '<i data-lucide="copy" class="w-4 h-4"></i>';
                lucide.createIcons();
            }, 2000);
        }

        function randomize() {
            // Random Topic if empty
            const randomTopics = ['Cambiamento Climatico', 'Intelligenza Artificiale', 'Dante Alighieri', 'Il Sistema Solare', 'Democrazia', 'Fotosintesi'];
            if(!state.topic) {
                document.getElementById('topicInput').value = randomTopics[Math.floor(Math.random() * randomTopics.length)];
                state.topic = document.getElementById('topicInput').value;
            }

            // Random Hat
            const rHat = hats[Math.floor(Math.random() * hats.length)];
            selectHat(rHat.id);

            // Random Intel
            const rIntel = intelligences[Math.floor(Math.random() * intelligences.length)];
            selectIntel(rIntel.id);

            // Generate
            setTimeout(generatePrompt, 300);
        }

        // Run
        init();

    </script>
</body>
</html>
